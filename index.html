<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>

    <link rel="stylesheet" href="../css/styles.css">
</head>
<body>

<input data-js-validate="numbers" type="text" placeholder="numbers" />
<input data-js-validate="strings" type="text" placeholder="strings" />
<input data-js-validate="bools" data-js-bool type="text" placeholder="bools" />
<br />
<p data-errors-universal></p>
<!--<input data-js-validate="radio" type="radio" name="group1" data-value="true" />true-->
<!--<input data-js-validate="radio1" type="radio" name="group1" data-value="false" />false-->
<br />
<button data-js-button-validate>
    Validate
</button>

<script src="./js/jquery-3.3.1.js"></script>
<script type="module" src="./js/rulesEngine.js"></script>
<script type="text/javascript">
  // Active Jquery looking for elements with data-attribute when blured
  $('[data-js-validate]').blur((event) => {
      validateInputs(event.target);
  });

  $('[data-js-button-validate]').click((event) => {
      $('[data-js-validate]').each(function( index ) {
          validateInputs(this);
      });
  });

  // Each page will have its own validation file
  // containing rules for each input on the page.
  function validateInputs(inputTarget) {
      // Build rules per input, inputs name MUST match the rules name
      const rules = {
          numbers: {
              maxLength: 10,
              minLength: 1,
              type: 'number',
              reEvaluate: [
                  'strings'
              ],
          },
          strings: {
              maxLength: 99,
              minLength: 1,
              type: 'string',
              dependants: {
                  numbers: '1',
              },
          },
          bools: {
              maxLength: 5,
              minLength: 4,
              type: 'bool',
          },
          radio: {
              type: 'bool',
              dependants: {
                  numbers: '123',
              }
          }
      };

      // Call utility with target object and page specified rules
      // Rules are ran based on targets name
      processRules(inputTarget, rules);
  }
</script>

</body>
</html>
